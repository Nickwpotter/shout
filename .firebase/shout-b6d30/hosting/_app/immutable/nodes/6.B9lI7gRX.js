import{s as at,n as ke,c as De,o as st,d as qe,e as nt,r as ot}from"../chunks/scheduler.PCYk-eKx.js";import{S as rt,i as it,e as r,c as i,a as _,d as f,q as a,g as de,v as ct,w as tt,p as W,s as b,t as se,f as g,b as ne,h as t,r as _e,j as he,x as dt,y as ve,z as Be,u as lt,A as He,B as Oe}from"../chunks/index.CKmYMgu1.js";import{e as Pe}from"../chunks/each.D6YF6ztN.js";import{a as ut,d as ye,b as Ae,q as Qe,w as je,c as Re,g as ze,e as ft}from"../chunks/firebase.C7CWxqOX.js";import{w as Ue}from"../chunks/index.eg0ioKiZ.js";import{a as ht}from"../chunks/authStore.Cjia8BFJ.js";import{p as vt}from"../chunks/stores.BM9nTBFZ.js";import{g as Fe}from"../chunks/entry.BDb0CWYC.js";function Ge(s,e,l){const n=s.slice();return n[38]=e[l],n[40]=l,n}function Ye(s,e,l){const n=s.slice();return n[35]=e[l],n}function pt(s){let e,l="Something went wrong";return{c(){e=r("div"),e.textContent=l},l(n){e=i(n,"DIV",{"data-svelte-h":!0}),W(e)!=="svelte-1xwo6cz"&&(e.textContent=l)},m(n,c){de(n,e,c)},p:ke,d(n){n&&f(e)}}}function _t(s){let e,l,n,c,o,d,D,I,E,m,N="Merchant:",y,M,F,R,k,x="Influencer:",Q,P,v,T,G,ee="Start Date:",S,te=s[11].promotionStartDate+"",B,O,Y,oe,X="QR Code ID:",$,j,le,A,z,ie="Download QR Code",L,h,U,u=s[0].userType==="merchant"&&Je(s),p=s[17].length>0&&Ke(s);return{c(){e=r("div"),l=r("div"),n=r("div"),c=r("div"),o=r("div"),d=r("img"),I=b(),E=r("p"),m=r("span"),m.textContent=N,y=b(),M=se(s[2]),F=b(),R=r("p"),k=r("span"),k.textContent=x,Q=b(),P=se(s[5]),v=b(),T=r("p"),G=r("span"),G.textContent=ee,S=b(),B=se(te),O=b(),Y=r("p"),oe=r("span"),oe.textContent=X,$=b(),j=se(s[10]),le=b(),u&&u.c(),A=b(),z=r("button"),z.textContent=ie,L=b(),p&&p.c(),this.h()},l(C){e=i(C,"DIV",{class:!0});var q=_(e);l=i(q,"DIV",{class:!0});var J=_(l);n=i(J,"DIV",{class:!0});var pe=_(n);c=i(pe,"DIV",{class:!0});var H=_(c);o=i(H,"DIV",{class:!0});var K=_(o);d=i(K,"IMG",{src:!0,alt:!0,class:!0}),K.forEach(f),I=g(H),E=i(H,"P",{class:!0});var ue=_(E);m=i(ue,"SPAN",{class:!0,"data-svelte-h":!0}),W(m)!=="svelte-5erjst"&&(m.textContent=N),y=g(ue),M=ne(ue,s[2]),ue.forEach(f),F=g(H),R=i(H,"P",{class:!0});var fe=_(R);k=i(fe,"SPAN",{class:!0,"data-svelte-h":!0}),W(k)!=="svelte-8hwr1a"&&(k.textContent=x),Q=g(fe),P=ne(fe,s[5]),fe.forEach(f),v=g(H),T=i(H,"P",{class:!0});var me=_(T);G=i(me,"SPAN",{class:!0,"data-svelte-h":!0}),W(G)!=="svelte-92ix5p"&&(G.textContent=ee),S=g(me),B=ne(me,te),me.forEach(f),O=g(H),Y=i(H,"P",{class:!0});var be=_(Y);oe=i(be,"SPAN",{class:!0,"data-svelte-h":!0}),W(oe)!=="svelte-2oankk"&&(oe.textContent=X),$=g(be),j=ne(be,s[10]),be.forEach(f),le=g(H),u&&u.l(H),A=g(H),z=i(H,"BUTTON",{class:!0,"data-svelte-h":!0}),W(z)!=="svelte-i8nhyw"&&(z.textContent=ie),H.forEach(f),pe.forEach(f),L=g(J),p&&p.l(J),J.forEach(f),q.forEach(f),this.h()},h(){qe(d.src,D=s[1])||a(d,"src",D),a(d,"alt","QR Code"),a(d,"class","w-40 h-40"),a(o,"class","bg-white p-2 mb-4 rounded-lg"),a(m,"class","bg-gradient-to-r from-[#833ab4] from-10% via-[#fd1d1d] via-30% to-[#fcb045] to-90% inline-block text-transparent bg-clip-text"),a(E,"class","text-white font-bold mb-2"),a(k,"class","bg-gradient-to-r from-[#833ab4] from-10% via-[#fd1d1d] via-30% to-[#fcb045] to-90% inline-block text-transparent bg-clip-text"),a(R,"class","text-white font-bold mb-2"),a(G,"class","bg-gradient-to-r from-[#833ab4] from-10% via-[#fd1d1d] via-30% to-[#fcb045] to-90% inline-block text-transparent bg-clip-text"),a(T,"class","text-white font-bold mb-2"),a(oe,"class","bg-gradient-to-r from-[#833ab4] from-10% via-[#fd1d1d] via-30% to-[#fcb045] to-90% inline-block text-transparent bg-clip-text"),a(Y,"class","text-white font-bold mb-2"),a(z,"class","btn bg-gradient-to-r from-[#833ab4] from-10% via-[#fd1d1d] via-30% to-[#fcb045] to-90% !text-white !rounded-lg border-none w-full mt-4"),a(c,"class","min-w-sm shadow-lg rounded-lg p-6 bg-black flex flex-col items-center"),a(n,"class","bg-gradient-to-r from-[#833ab4] from-10% via-[#fd1d1d] via-30% to-[#fcb045] to-90% p-2 rounded-lg flex-col"),a(l,"class","lg:flex-row"),a(e,"class","lg:flex lg:flex-col my-3 py-3")},m(C,q){de(C,e,q),t(e,l),t(l,n),t(n,c),t(c,o),t(o,d),t(c,I),t(c,E),t(E,m),t(E,y),t(E,M),t(c,F),t(c,R),t(R,k),t(R,Q),t(R,P),t(c,v),t(c,T),t(T,G),t(T,S),t(T,B),t(c,O),t(c,Y),t(Y,oe),t(Y,$),t(Y,j),t(c,le),u&&u.m(c,null),t(c,A),t(c,z),t(l,L),p&&p.m(l,null),h||(U=_e(z,"click",s[22]),h=!0)},p(C,q){q[0]&2&&!qe(d.src,D=C[1])&&a(d,"src",D),q[0]&4&&he(M,C[2]),q[0]&32&&he(P,C[5]),q[0]&2048&&te!==(te=C[11].promotionStartDate+"")&&he(B,te),q[0]&1024&&he(j,C[10]),C[0].userType==="merchant"?u?u.p(C,q):(u=Je(C),u.c(),u.m(c,A)):u&&(u.d(1),u=null),C[17].length>0?p?p.p(C,q):(p=Ke(C),p.c(),p.m(l,null)):p&&(p.d(1),p=null)},d(C){C&&f(e),u&&u.d(),p&&p.d(),h=!1,U()}}}function mt(s){let e,l="Create Campaign Code",n,c,o,d,D,I='<span class="text-white">Merchant</span>',E,m,N,y,M,F='<span class="!text-white">Influencer</span>',R,k,x,Q="Pick one",P,v,T,G='<span class="text-white">Promotion Start Date</span>',ee,S,te,B,O,Y='<span class="text-white">Promotion Duration</span>',oe,X,$,j,le,A,z,ie,L,h="Days",U,u,p,C,q,J,pe="Hours",H,K,ue,fe,me,be,Me,we=Pe(s[4]),ae=[];for(let w=0;w<we.length;w+=1)ae[w]=Xe(Ye(s,we,w));let ce=s[15]&&Ze(),re=s[16]&&$e(s);return me=dt(s[29][0]),{c(){e=r("h1"),e.textContent=l,n=b(),c=r("div"),o=r("div"),d=r("div"),D=r("label"),D.innerHTML=I,E=b(),m=r("input"),N=b(),y=r("label"),M=r("div"),M.innerHTML=F,R=b(),k=r("select"),x=r("option"),x.textContent=Q;for(let w=0;w<ae.length;w+=1)ae[w].c();P=b(),v=r("div"),T=r("label"),T.innerHTML=G,ee=b(),S=r("input"),te=b(),B=r("div"),O=r("label"),O.innerHTML=Y,oe=b(),X=r("input"),$=b(),j=r("div"),le=r("label"),A=r("input"),ie=b(),L=r("span"),L.textContent=h,U=b(),u=r("label"),p=r("input"),q=b(),J=r("span"),J.textContent=pe,H=b(),K=r("button"),ce&&ce.c(),ue=se(`
                        Generate Code`),fe=b(),re&&re.c(),this.h()},l(w){e=i(w,"H1",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1y02dnt"&&(e.textContent=l),n=g(w),c=i(w,"DIV",{class:!0});var Z=_(c);o=i(Z,"DIV",{class:!0});var V=_(o);d=i(V,"DIV",{class:!0});var ge=_(d);D=i(ge,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),W(D)!=="svelte-hc6hcq"&&(D.innerHTML=I),E=g(ge),m=i(ge,"INPUT",{id:!0,type:!0,class:!0}),ge.forEach(f),N=g(V),y=i(V,"LABEL",{class:!0});var Ee=_(y);M=i(Ee,"DIV",{class:!0,"data-svelte-h":!0}),W(M)!=="svelte-r2mmg"&&(M.innerHTML=F),R=g(Ee),k=i(Ee,"SELECT",{class:!0});var Ve=_(k);x=i(Ve,"OPTION",{"data-svelte-h":!0}),W(x)!=="svelte-8xjvh6"&&(x.textContent=Q);for(let Se=0;Se<ae.length;Se+=1)ae[Se].l(Ve);Ve.forEach(f),Ee.forEach(f),P=g(V),v=i(V,"DIV",{class:!0});var xe=_(v);T=i(xe,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),W(T)!=="svelte-rowqhe"&&(T.innerHTML=G),ee=g(xe),S=i(xe,"INPUT",{id:!0,type:!0,class:!0}),xe.forEach(f),te=g(V),B=i(V,"DIV",{class:!0});var Ce=_(B);O=i(Ce,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),W(O)!=="svelte-3i1zdy"&&(O.innerHTML=Y),oe=g(Ce),X=i(Ce,"INPUT",{id:!0,type:!0,class:!0}),$=g(Ce),j=i(Ce,"DIV",{class:!0});var Te=_(j);le=i(Te,"LABEL",{class:!0});var Ie=_(le);A=i(Ie,"INPUT",{type:!0,name:!0,class:!0}),ie=g(Ie),L=i(Ie,"SPAN",{class:!0,"data-svelte-h":!0}),W(L)!=="svelte-1t6vrnv"&&(L.textContent=h),Ie.forEach(f),U=g(Te),u=i(Te,"LABEL",{class:!0});var Le=_(u);p=i(Le,"INPUT",{type:!0,name:!0,class:!0}),q=g(Le),J=i(Le,"SPAN",{class:!0,"data-svelte-h":!0}),W(J)!=="svelte-1mh0gi1"&&(J.textContent=pe),Le.forEach(f),Te.forEach(f),Ce.forEach(f),H=g(V),K=i(V,"BUTTON",{class:!0});var Ne=_(K);ce&&ce.l(Ne),ue=ne(Ne,`
                        Generate Code`),Ne.forEach(f),fe=g(V),re&&re.l(V),V.forEach(f),Z.forEach(f),this.h()},h(){a(e,"class","text-3xl font-bold text-white mb-4"),a(D,"class","label"),a(D,"for","storeName"),a(m,"id","storeName"),a(m,"type","text"),a(m,"class","input input-bordered border-black !text-white"),m.disabled=!0,a(d,"class","form-control mb-4"),a(M,"class","label"),x.disabled=!0,x.selected=!0,x.__value="Pick one",ve(x,x.__value),a(k,"class","select select-bordered !text-white"),s[3]===void 0&&nt(()=>s[25].call(k)),a(y,"class","form-control w-full max-w-xs"),a(T,"class","label"),a(T,"for","promotionStartDate"),a(S,"id","promotionStartDate"),a(S,"type","date"),a(S,"class","input input-bordered border-black text-white"),a(v,"class","form-control mb-4"),a(O,"class","label"),a(O,"for","promotionDuration"),a(X,"id","promotionDuration"),a(X,"type","number"),a(X,"class","input input-bordered border-black text-white"),a(A,"type","radio"),a(A,"name","durationUnit"),A.__value="days",ve(A,A.__value),A.checked=z=s[9]==="days",a(A,"class","form-radio text-white"),a(L,"class","ml-2 text-white"),a(le,"class","inline-flex items-center"),a(p,"type","radio"),a(p,"name","durationUnit"),p.__value="hours",ve(p,p.__value),p.checked=C=s[9]==="hours",a(p,"class","form-radio text-white"),a(J,"class","ml-2 text-white"),a(u,"class","inline-flex items-center"),a(j,"class","mt-2"),a(B,"class","form-control mb-4"),a(K,"class","btn bg-gradient-to-r from-[#833ab4] from-10% via-[#fd1d1d] via-30% to-[#fcb045] to-90% !text-white !rounded-lg border-none w-full shadow-md"),K.disabled=s[15],a(o,"class","w-full max-w-sm shadow-lg rounded-lg p-6 bg-black"),a(c,"class","bg-gradient-to-r from-[#833ab4] from-10% via-[#fd1d1d] via-30% to-[#fcb045] to-90% rounded-lg p-2 max-w-md min-w-[350px]"),me.p(A,p)},m(w,Z){de(w,e,Z),de(w,n,Z),de(w,c,Z),t(c,o),t(o,d),t(d,D),t(d,E),t(d,m),ve(m,s[2]),t(o,N),t(o,y),t(y,M),t(y,R),t(y,k),t(k,x);for(let V=0;V<ae.length;V+=1)ae[V]&&ae[V].m(k,null);Be(k,s[3],!0),t(o,P),t(o,v),t(v,T),t(v,ee),t(v,S),ve(S,s[7]),t(o,te),t(o,B),t(B,O),t(B,oe),t(B,X),ve(X,s[8]),t(B,$),t(B,j),t(j,le),t(le,A),A.checked=A.__value===s[9],t(le,ie),t(le,L),t(j,U),t(j,u),t(u,p),p.checked=p.__value===s[9],t(u,q),t(u,J),t(o,H),t(o,K),ce&&ce.m(K,null),t(K,ue),t(o,fe),re&&re.m(o,null),be||(Me=[_e(m,"input",s[24]),_e(k,"change",s[25]),_e(S,"input",s[26]),_e(X,"input",s[27]),_e(A,"change",s[28]),_e(p,"change",s[30]),_e(K,"click",s[21])],be=!0)},p(w,Z){if(Z[0]&4&&m.value!==w[2]&&ve(m,w[2]),Z[0]&16){we=Pe(w[4]);let V;for(V=0;V<we.length;V+=1){const ge=Ye(w,we,V);ae[V]?ae[V].p(ge,Z):(ae[V]=Xe(ge),ae[V].c(),ae[V].m(k,null))}for(;V<ae.length;V+=1)ae[V].d(1);ae.length=we.length}Z[0]&24&&Be(k,w[3]),Z[0]&128&&ve(S,w[7]),Z[0]&256&&tt(X.value)!==w[8]&&ve(X,w[8]),Z[0]&512&&z!==(z=w[9]==="days")&&(A.checked=z),Z[0]&512&&(A.checked=A.__value===w[9]),Z[0]&512&&C!==(C=w[9]==="hours")&&(p.checked=C),Z[0]&512&&(p.checked=p.__value===w[9]),w[15]?ce||(ce=Ze(),ce.c(),ce.m(K,ue)):ce&&(ce.d(1),ce=null),Z[0]&32768&&(K.disabled=w[15]),w[16]?re?re.p(w,Z):(re=$e(w),re.c(),re.m(o,null)):re&&(re.d(1),re=null)},d(w){w&&(f(e),f(n),f(c)),lt(ae,w),ce&&ce.d(),re&&re.d(),me.r(),be=!1,ot(Me)}}}function bt(s){let e;return{c(){e=r("span"),this.h()},l(l){e=i(l,"SPAN",{class:!0}),_(e).forEach(f),this.h()},h(){a(e,"class","loading loading-infinity loading-lg text-white")},m(l,n){de(l,e,n)},p:ke,d(l){l&&f(e)}}}function Je(s){let e,l="Test QR Code Link",n,c;return{c(){e=r("button"),e.textContent=l,this.h()},l(o){e=i(o,"BUTTON",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-ry5jaa"&&(e.textContent=l),this.h()},h(){a(e,"class","btn !text-white btn-active btn-link")},m(o,d){de(o,e,d),n||(c=_e(e,"click",s[23]),n=!0)},p:ke,d(o){o&&f(e),n=!1,c()}}}function Ke(s){let e,l,n,c="Total Sales",o,d,D,I=s[12].toFixed(2)+"",E,m,N,y,M="Average Transaction Price",F,R,k,x=s[13].toFixed(2)+"",Q,P,v,T,G="Total Code Transactions",ee,S,te,B,O,Y,oe="Recent Transactions",X,$,j,le='<tr><th class="hidden md:table-cell">Row #</th> <th>Employee Name</th> <th class="hidden sm:table-cell">Date</th> <th>Transaction Value</th></tr>',A,z,ie=Pe(s[17]),L=[];for(let h=0;h<ie.length;h+=1)L[h]=We(Ge(s,ie,h));return{c(){e=r("div"),l=r("div"),n=r("div"),n.textContent=c,o=b(),d=r("div"),D=se("$"),E=se(I),m=b(),N=r("div"),y=r("div"),y.textContent=M,F=b(),R=r("div"),k=se("$"),Q=se(x),P=b(),v=r("div"),T=r("div"),T.textContent=G,ee=b(),S=r("div"),te=se(s[14]),B=b(),O=r("div"),Y=r("h1"),Y.textContent=oe,X=b(),$=r("table"),j=r("thead"),j.innerHTML=le,A=b(),z=r("tbody");for(let h=0;h<L.length;h+=1)L[h].c();this.h()},l(h){e=i(h,"DIV",{class:!0});var U=_(e);l=i(U,"DIV",{class:!0});var u=_(l);n=i(u,"DIV",{class:!0,"data-svelte-h":!0}),W(n)!=="svelte-1r9t4va"&&(n.textContent=c),o=g(u),d=i(u,"DIV",{class:!0});var p=_(d);D=ne(p,"$"),E=ne(p,I),p.forEach(f),u.forEach(f),m=g(U),N=i(U,"DIV",{class:!0});var C=_(N);y=i(C,"DIV",{class:!0,"data-svelte-h":!0}),W(y)!=="svelte-1lkd4am"&&(y.textContent=M),F=g(C),R=i(C,"DIV",{class:!0});var q=_(R);k=ne(q,"$"),Q=ne(q,x),q.forEach(f),C.forEach(f),P=g(U),v=i(U,"DIV",{class:!0});var J=_(v);T=i(J,"DIV",{class:!0,"data-svelte-h":!0}),W(T)!=="svelte-19jqvas"&&(T.textContent=G),ee=g(J),S=i(J,"DIV",{class:!0});var pe=_(S);te=ne(pe,s[14]),pe.forEach(f),J.forEach(f),U.forEach(f),B=g(h),O=i(h,"DIV",{class:!0});var H=_(O);Y=i(H,"H1",{class:!0,"data-svelte-h":!0}),W(Y)!=="svelte-1353wcu"&&(Y.textContent=oe),X=g(H),$=i(H,"TABLE",{class:!0});var K=_($);j=i(K,"THEAD",{"data-svelte-h":!0}),W(j)!=="svelte-1s0pp4l"&&(j.innerHTML=le),A=g(K),z=i(K,"TBODY",{});var ue=_(z);for(let fe=0;fe<L.length;fe+=1)L[fe].l(ue);ue.forEach(f),K.forEach(f),H.forEach(f),this.h()},h(){a(n,"class","stat-title"),a(d,"class","stat-value"),a(l,"class","stat"),a(y,"class","stat-title"),a(R,"class","stat-value"),a(N,"class","stat"),a(T,"class","stat-title"),a(S,"class","stat-value"),a(v,"class","stat"),a(e,"class","lg:flex-row stats stats-vertical md:stats-horizontal shadow w-full"),a(Y,"class","text-white"),a($,"class","table text-white min-w-full lg:w-auto lg:max-"),a(O,"class","overflow-x-auto flex-col mt-4 lg:mt-0 lg:ml-6")},m(h,U){de(h,e,U),t(e,l),t(l,n),t(l,o),t(l,d),t(d,D),t(d,E),t(e,m),t(e,N),t(N,y),t(N,F),t(N,R),t(R,k),t(R,Q),t(e,P),t(e,v),t(v,T),t(v,ee),t(v,S),t(S,te),de(h,B,U),de(h,O,U),t(O,Y),t(O,X),t(O,$),t($,j),t($,A),t($,z);for(let u=0;u<L.length;u+=1)L[u]&&L[u].m(z,null)},p(h,U){if(U[0]&4096&&I!==(I=h[12].toFixed(2)+"")&&he(E,I),U[0]&8192&&x!==(x=h[13].toFixed(2)+"")&&he(Q,x),U[0]&16384&&he(te,h[14]),U[0]&131072){ie=Pe(h[17]);let u;for(u=0;u<ie.length;u+=1){const p=Ge(h,ie,u);L[u]?L[u].p(p,U):(L[u]=We(p),L[u].c(),L[u].m(z,null))}for(;u<L.length;u+=1)L[u].d(1);L.length=ie.length}},d(h){h&&(f(e),f(B),f(O)),lt(L,h)}}}function We(s){let e,l,n=s[40]+1+"",c,o,d,D=s[38].employeeName+"",I,E,m,N=new Date(s[38].timestamp.seconds*1e3).toLocaleString()+"",y,M,F,R,k=s[38].transactionAmount.toFixed(2)+"",x,Q;return{c(){e=r("tr"),l=r("td"),c=se(n),o=b(),d=r("td"),I=se(D),E=b(),m=r("td"),y=se(N),M=b(),F=r("td"),R=se("$"),x=se(k),Q=b(),this.h()},l(P){e=i(P,"TR",{});var v=_(e);l=i(v,"TD",{class:!0});var T=_(l);c=ne(T,n),T.forEach(f),o=g(v),d=i(v,"TD",{});var G=_(d);I=ne(G,D),G.forEach(f),E=g(v),m=i(v,"TD",{class:!0});var ee=_(m);y=ne(ee,N),ee.forEach(f),M=g(v),F=i(v,"TD",{});var S=_(F);R=ne(S,"$"),x=ne(S,k),S.forEach(f),Q=g(v),v.forEach(f),this.h()},h(){a(l,"class","hidden md:table-cell"),a(m,"class","hidden sm:table-cell")},m(P,v){de(P,e,v),t(e,l),t(l,c),t(e,o),t(e,d),t(d,I),t(e,E),t(e,m),t(m,y),t(e,M),t(e,F),t(F,R),t(F,x),t(e,Q)},p(P,v){v[0]&131072&&D!==(D=P[38].employeeName+"")&&he(I,D),v[0]&131072&&N!==(N=new Date(P[38].timestamp.seconds*1e3).toLocaleString()+"")&&he(y,N),v[0]&131072&&k!==(k=P[38].transactionAmount.toFixed(2)+"")&&he(x,k)},d(P){P&&f(e)}}}function Xe(s){let e,l=s[35].name+"",n,c;return{c(){e=r("option"),n=se(l),this.h()},l(o){e=i(o,"OPTION",{});var d=_(e);n=ne(d,l),d.forEach(f),this.h()},h(){e.__value=c=s[35].ref,ve(e,e.__value)},m(o,d){de(o,e,d),t(e,n)},p(o,d){d[0]&16&&l!==(l=o[35].name+"")&&he(n,l),d[0]&16&&c!==(c=o[35].ref)&&(e.__value=c,ve(e,e.__value))},d(o){o&&f(e)}}}function Ze(s){let e;return{c(){e=r("span"),this.h()},l(l){e=i(l,"SPAN",{class:!0}),_(e).forEach(f),this.h()},h(){a(e,"class","loading loading-infinity loading-lg")},m(l,n){de(l,e,n)},d(l){l&&f(e)}}}function $e(s){let e,l,n,c,o,d;return{c(){e=r("div"),l=He("svg"),n=He("path"),c=b(),o=r("span"),d=se(s[16]),this.h()},l(D){e=i(D,"DIV",{role:!0,class:!0});var I=_(e);l=Oe(I,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0});var E=_(l);n=Oe(E,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),_(n).forEach(f),E.forEach(f),c=g(I),o=i(I,"SPAN",{});var m=_(o);d=ne(m,s[16]),m.forEach(f),I.forEach(f),this.h()},h(){a(n,"stroke-linecap","round"),a(n,"stroke-linejoin","round"),a(n,"stroke-width","2"),a(n,"d","M10.29 3.86l1.42-1.42 9.42 9.42-1.42 1.42-9.42-9.42zm2.71 6.42V6.7a9 9 0 00-1.71-5.3l1.42-1.42A10.978 10.978 0 0114 6.7v3.58l5.7 5.7a10.978 10.978 0 011.42-1.42L14 6.7v3.58z"),a(l,"xmlns","http://www.w3.org/2000/svg"),a(l,"class","stroke-current shrink-0 h-6 w-6"),a(l,"fill","none"),a(l,"viewBox","0 0 24 24"),a(e,"role","alert"),a(e,"class","alert bg-gradient-to-r to-[#fd1d1d] from-[#fcb045] !text-white")},m(D,I){de(D,e,I),t(e,l),t(l,n),t(e,c),t(e,o),t(o,d)},p(D,I){I[0]&65536&&he(d,D[16])},d(D){D&&f(e)}}}function gt(s){let e;function l(o,d){return o[15]?bt:o[6]?mt:o[11]&&o[1]?_t:pt}let n=l(s),c=n(s);return{c(){e=r("div"),c.c(),this.h()},l(o){e=i(o,"DIV",{class:!0});var d=_(e);c.l(d),d.forEach(f),this.h()},h(){a(e,"class","p-8 bg-base-100 text-black min-h-screen flex flex-col items-center")},m(o,d){de(o,e,d),c.m(e,null)},p(o,d){n===(n=l(o))&&c?c.p(o,d):(c.d(1),c=n(o),c&&(c.c(),c.m(e,null)))},i:ke,o:ke,d(o){o&&f(e),c.d()}}}const et="https://shout-b6d30.web.app/transaction";function wt(s,e,l){let n,c,o,d,D;De(s,ht,h=>l(0,n=h)),De(s,vt,h=>l(33,c=h));let I="",E="",m="",N=Ue("");De(s,N,h=>l(16,d=h));let y=Ue(!1);De(s,y,h=>l(15,o=h));let M,F=[],R,k=!0,x="",Q=0,P="days",v=c.params.codeId,T,G,ee=Ue([]);De(s,ee,h=>l(17,D=h));let S=0,te=0,B=0;st(async()=>{var p;if(v==="new"){const C=Qe(Re(ye,"users"),je("type","==","influencer")),q=await ze(C);l(4,F=q.docs.map(J=>({...J.data(),ref:J.ref})))}else{l(6,k=!1),T=ut(ye,"codes",v);const C=await Ae(T);l(11,G=C.data()),m=`${et}/${v}`,l(1,I=`https://api.qrserver.com/v1/create-qr-code/?data=${encodeURIComponent(m)}&size=200x200&format=png`);const q=G.influencer,pe=(await Ae(q)).data();l(5,R=pe.name);const H=G.merchant,ue=(await Ae(H)).data();l(2,E=ue.name)}n.userType==="merchant"&&l(2,E=(p=n==null?void 0:n.userData)==null?void 0:p.name);const h=Qe(Re(ye,"transactions"),je("code","==",T));let u=(await ze(h)).docs.map(C=>({...C.data(),id:C.id}));ee.set(u),l(14,B=u.length),l(12,S=u.reduce((C,q)=>C+q.transactionAmount,0)),l(13,te=B>0?S/B:0)});const O=()=>{l(3,M=""),l(7,x=""),l(8,Q=0),l(9,P="days"),l(2,E="")},Y=async()=>{if(!M||!x.trim()||Q<=0){N.set("All fields are required.");return}y.set(!0);try{const h=await ft(Re(ye,"codes"),{influencer:M,promotionStartDate:x,promotionDuration:Q,durationUnit:P,merchant:n.userRef,usageCount:0,timestamp:new Date});l(10,v=h.id),m=`${et}/${v}`,l(1,I=`https://api.qrserver.com/v1/create-qr-code/?data=${encodeURIComponent(m)}&size=200x200&format=png`),N.set(""),await Fe(`/app/campaigns/${v}`),window.location.reload()}catch(h){console.error("Error generating QR Code:",h),N.set("Error generating QR code. Please try again.")}y.set(!1),O()},oe=()=>{fetch(I).then(h=>h.blob()).then(h=>{const U=window.URL.createObjectURL(h),u=document.createElement("a");u.style.display="none",u.href=U,u.download="qrcode.png",document.body.appendChild(u),u.click(),window.URL.revokeObjectURL(U)}).catch(h=>{console.error("Error downloading the QR code:",h),N.set("Error downloading the QR code. Please try again.")})},X=()=>{Fe(`/app/transaction/${v}`)},$=[[]];function j(){E=this.value,l(2,E),l(0,n)}function le(){M=ct(this),l(3,M),l(4,F)}function A(){x=this.value,l(7,x)}function z(){Q=tt(this.value),l(8,Q)}function ie(){P=this.__value,l(9,P)}function L(){P=this.__value,l(9,P)}return s.$$.update=()=>{var h;s.$$.dirty[0]&1&&n&&l(2,E=(h=n==null?void 0:n.userData)==null?void 0:h.name)},[n,I,E,M,F,R,k,x,Q,P,v,G,S,te,B,o,d,D,N,y,ee,Y,oe,X,j,le,A,z,ie,$,L]}class yt extends rt{constructor(e){super(),it(this,e,wt,gt,at,{},null,[-1,-1])}}export{yt as component};
