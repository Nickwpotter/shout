import{s as nt,n as P,c as ot,o as st}from"../chunks/scheduler.PCYk-eKx.js";import{S as rt,i as it,e as p,s as D,c as v,a as g,q as k,f as T,d as b,p as y,g as B,h as i,r as ct,u as ft,t as V,b as j,j as R}from"../chunks/index.BWac97FB.js";import{e as Q}from"../chunks/each.D6YF6ztN.js";import{q as W,w as X,c as Z,d as $,g as tt}from"../chunks/firebase.C7CWxqOX.js";import{a as dt}from"../chunks/authStore.Dc8xNwkm.js";import{g as ht}from"../chunks/entry.D5liSSLQ.js";function et(c,t,l){const e=c.slice();return e[5]=t[l],e}function at(c){let t,l="Create new Campaign",e,d;return{c(){t=p("button"),t.textContent=l,this.h()},l(h){t=v(h,"BUTTON",{class:!0,"data-svelte-h":!0}),k(t)!=="svelte-d3dy28"&&(t.textContent=l),this.h()},h(){y(t,"class","btn bg-gradient-to-r from-[#833ab4] from-10% via-[#fd1d1d] via-30% to-[#fcb045] to-90% !text-white !rounded-lg border-none shadow-md")},m(h,u){B(h,t,u),e||(d=ct(t,"click",c[3]),e=!0)},d(h){h&&b(t),e=!1,d()}}}function ut(c){let t,l="No campaigns yet.";return{c(){t=p("h1"),t.textContent=l,this.h()},l(e){t=v(e,"H1",{class:!0,"data-svelte-h":!0}),k(t)!=="svelte-1jf1s99"&&(t.textContent=l),this.h()},h(){y(t,"class","text-white font-bold text-[26px]")},m(e,d){B(e,t,d)},p:P,d(e){e&&b(t)}}}function _t(c){let t,l,e,d,h="<tr><th></th> <th>ID</th> <th>Start Date</th> <th>Duration</th> <th>Influencer</th> <th>Total Transactions</th> <th></th></tr>",u,r,_=Q(c[1]),o=[];for(let a=0;a<_.length;a+=1)o[a]=lt(et(c,_,a));return{c(){t=p("div"),l=p("div"),e=p("table"),d=p("thead"),d.innerHTML=h,u=D(),r=p("tbody");for(let a=0;a<o.length;a+=1)o[a].c();this.h()},l(a){t=v(a,"DIV",{class:!0});var s=g(t);l=v(s,"DIV",{class:!0});var n=g(l);e=v(n,"TABLE",{class:!0});var m=g(e);d=v(m,"THEAD",{"data-svelte-h":!0}),k(d)!=="svelte-bt3mxb"&&(d.innerHTML=h),u=T(m),r=v(m,"TBODY",{});var x=g(r);for(let w=0;w<o.length;w+=1)o[w].l(x);x.forEach(b),m.forEach(b),n.forEach(b),s.forEach(b),this.h()},h(){y(e,"class","table text-white"),y(l,"class","overflow-x-auto"),y(t,"class","w-full p-4")},m(a,s){B(a,t,s),i(t,l),i(l,e),i(e,d),i(e,u),i(e,r);for(let n=0;n<o.length;n+=1)o[n]&&o[n].m(r,null)},p(a,s){if(s&2){_=Q(a[1]);let n;for(n=0;n<_.length;n+=1){const m=et(a,_,n);o[n]?o[n].p(m,s):(o[n]=lt(m),o[n].c(),o[n].m(r,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=_.length}},d(a){a&&b(t),ft(o,a)}}}function lt(c){let t,l,e="1",d,h,u=c[5].ref.id+"",r,_,o,a=c[5].promotionStartDate+"",s,n,m,x=c[5].promotionDuration+"",w,A,S,q=c[5].influencer.id+"",L,N,H,I=c[5].usageCount+"",M,O,E,U="View",Y;return{c(){t=p("tr"),l=p("th"),l.textContent=e,d=D(),h=p("td"),r=V(u),_=D(),o=p("td"),s=V(a),n=D(),m=p("td"),w=V(x),A=D(),S=p("td"),L=V(q),N=D(),H=p("td"),M=V(I),O=D(),E=p("td"),E.textContent=U,Y=D()},l(C){t=v(C,"TR",{});var f=g(t);l=v(f,"TH",{"data-svelte-h":!0}),k(l)!=="svelte-728xsj"&&(l.textContent=e),d=T(f),h=v(f,"TD",{});var z=g(h);r=j(z,u),z.forEach(b),_=T(f),o=v(f,"TD",{});var F=g(o);s=j(F,a),F.forEach(b),n=T(f),m=v(f,"TD",{});var G=g(m);w=j(G,x),G.forEach(b),A=T(f),S=v(f,"TD",{});var J=g(S);L=j(J,q),J.forEach(b),N=T(f),H=v(f,"TD",{});var K=g(H);M=j(K,I),K.forEach(b),O=T(f),E=v(f,"TD",{"data-svelte-h":!0}),k(E)!=="svelte-1f5k16v"&&(E.textContent=U),Y=T(f),f.forEach(b)},m(C,f){B(C,t,f),i(t,l),i(t,d),i(t,h),i(h,r),i(t,_),i(t,o),i(o,s),i(t,n),i(t,m),i(m,w),i(t,A),i(t,S),i(S,L),i(t,N),i(t,H),i(H,M),i(t,O),i(t,E),i(t,Y)},p(C,f){f&2&&u!==(u=C[5].ref.id+"")&&R(r,u),f&2&&a!==(a=C[5].promotionStartDate+"")&&R(s,a),f&2&&x!==(x=C[5].promotionDuration+"")&&R(w,x),f&2&&q!==(q=C[5].influencer.id+"")&&R(L,q),f&2&&I!==(I=C[5].usageCount+"")&&R(M,I)},d(C){C&&b(t)}}}function mt(c){let t,l,e,d="Your Campaigns",h,u,r=c[0]==="merchant"&&at(c);function _(s,n){return s[1].length>0?_t:ut}let o=_(c),a=o(c);return{c(){t=p("div"),l=p("div"),e=p("h1"),e.textContent=d,h=D(),r&&r.c(),u=D(),a.c(),this.h()},l(s){t=v(s,"DIV",{});var n=g(t);l=v(n,"DIV",{class:!0});var m=g(l);e=v(m,"H1",{class:!0,"data-svelte-h":!0}),k(e)!=="svelte-sm021n"&&(e.textContent=d),h=T(m),r&&r.l(m),m.forEach(b),u=T(n),a.l(n),n.forEach(b),this.h()},h(){y(e,"class","text-[28px] font-bold text-white"),y(l,"class","w-full flex justify-between p-4")},m(s,n){B(s,t,n),i(t,l),i(l,e),i(l,h),r&&r.m(l,null),i(t,u),a.m(t,null)},p(s,[n]){s[0]==="merchant"?r||(r=at(s),r.c(),r.m(l,null)):r&&(r.d(1),r=null),o===(o=_(s))&&a?a.p(s,n):(a.d(1),a=o(s),a&&(a.c(),a.m(t,null)))},i:P,o:P,d(s){s&&b(t),r&&r.d(),a.d()}}}function pt(c,t,l){let e;ot(c,dt,_=>l(2,e=_));let d=[],h;st(async()=>{e.userType&&await u(e.userType)});async function u(_){if(_==="merchant"){const o=W(Z($,"codes"),X("merchant","==",e.userRef)),a=await tt(o);l(1,d=a.docs.map(s=>({...s.data(),ref:s.ref})))}else if(_==="influencer"){const o=W(Z($,"codes"),X("influencer","==",e.userRef)),a=await tt(o);l(1,d=a.docs.map(s=>({...s.data(),ref:s.ref})))}}const r=async()=>{await ht("/app/campaigns/new")};return c.$$.update=()=>{c.$$.dirty&5&&e.userRef&&(l(0,h=e.userType),u(h))},[h,d,e,r]}class xt extends rt{constructor(t){super(),it(this,t,pt,mt,nt,{})}}export{xt as component};
