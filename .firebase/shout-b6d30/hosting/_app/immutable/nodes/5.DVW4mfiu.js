import{s as Te,n as Nt,c as Ce,o as De,r as ge}from"../chunks/scheduler.PCYk-eKx.js";import{S as we,i as Ee,k as Pt,g as N,d as r,e as o,s as _,c as i,a as p,p as S,f as m,q as g,h as e,r as Rt,t as P,b as R,j as W,u as be}from"../chunks/index.CKmYMgu1.js";import{e as qt}from"../chunks/each.D6YF6ztN.js";import{q as jt,w as At,c as Mt,d as St,g as ce}from"../chunks/firebase.C7CWxqOX.js";import{a as ke}from"../chunks/authStore.Cjia8BFJ.js";import{g as fe}from"../chunks/entry.BDb0CWYC.js";function de(a,t,n){const l=a.slice();return l[18]=t[n],l[20]=n,l}function ue(a,t,n){const l=a.slice();return l[21]=t[n],l[20]=n,l}function xe(a){let t,n,l,u="Your Campaigns",s,c,f=a[0]==="merchant"&&he(a);function x(b,T){return b[1].length>0?Ve:Ie}let V=x(a),D=V(a);return{c(){t=o("div"),n=o("div"),l=o("h1"),l.textContent=u,s=_(),f&&f.c(),c=_(),D.c(),this.h()},l(b){t=i(b,"DIV",{class:!0});var T=p(t);n=i(T,"DIV",{class:!0});var H=p(n);l=i(H,"H1",{class:!0,"data-svelte-h":!0}),S(l)!=="svelte-sm021n"&&(l.textContent=u),s=m(H),f&&f.l(H),H.forEach(r),c=m(T),D.l(T),T.forEach(r),this.h()},h(){g(l,"class","text-[28px] font-bold text-white"),g(n,"class","w-full flex justify-between p-4"),g(t,"class","m-8")},m(b,T){N(b,t,T),e(t,n),e(n,l),e(n,s),f&&f.m(n,null),e(t,c),D.m(t,null)},p(b,T){b[0]==="merchant"?f||(f=he(b),f.c(),f.m(n,null)):f&&(f.d(1),f=null),V===(V=x(b))&&D?D.p(b,T):(D.d(1),D=V(b),D&&(D.c(),D.m(t,null)))},d(b){b&&r(t),f&&f.d(),D.d()}}}function ye(a){let t,n="<p>Loading...</p>";return{c(){t=o("div"),t.innerHTML=n,this.h()},l(l){t=i(l,"DIV",{class:!0,"data-svelte-h":!0}),S(t)!=="svelte-1lic2tl"&&(t.innerHTML=n),this.h()},h(){g(t,"class","flex items-center justify-center min-h-screen")},m(l,u){N(l,t,u)},p:Nt,d(l){l&&r(t)}}}function he(a){let t,n="Create new Campaign",l,u;return{c(){t=o("button"),t.textContent=n,this.h()},l(s){t=i(s,"BUTTON",{class:!0,"data-svelte-h":!0}),S(t)!=="svelte-1yf2n8w"&&(t.textContent=n),this.h()},h(){g(t,"class","btn bg-gradient-to-r from-[#833ab4] from-10% via-[#fd1d1d] via-30% to-[#fcb045] to-90% !text-white !rounded-lg border-none shadow-md")},m(s,c){N(s,t,c),l||(u=Rt(t,"click",a[13]),l=!0)},d(s){s&&r(t),l=!1,u()}}}function Ie(a){let t,n='<h1 class="text-white font-bold text-[26px]">No campaigns yet.</h1>',l,u,s=a[0]==="influencer"&&ve();return{c(){t=o("div"),t.innerHTML=n,l=_(),s&&s.c(),u=Pt(),this.h()},l(c){t=i(c,"DIV",{class:!0,"data-svelte-h":!0}),S(t)!=="svelte-e3ko25"&&(t.innerHTML=n),l=m(c),s&&s.l(c),u=Pt(),this.h()},h(){g(t,"class","w-full flex justify-between p-4")},m(c,f){N(c,t,f),N(c,l,f),s&&s.m(c,f),N(c,u,f)},p(c,f){c[0]==="influencer"?s||(s=ve(),s.c(),s.m(u.parentNode,u)):s&&(s.d(1),s=null)},d(c){c&&(r(t),r(l),r(u)),s&&s.d(c)}}}function Ve(a){let t,n,l,u,s,c,f="Row #",x,V,D="ID",b,T,H="Start Date",M,L,j="Duration",Y,I,O="Influencer",B,w,C="Total Transactions",d,h,E,y,A,K,F,Z='<h1 class="text-[28px] font-bold text-white">Lifetime</h1>',ot,nt,z,k,$,kt="Lifetime Account Sales",pt,tt,bt,at=a[5].toFixed(2)+"",it,Bt,rt,Zt="All-time sales",Ft,et,ct,$t="Average Transaction Price",Ot,ft,zt,xt=a[4].toFixed(2)+"",yt,Ut,dt,te="All-time average",Yt,lt,ut,ee="Lifetime Account Transactions",Qt,Tt,It,Gt,ht,le="All-time transactions",Vt,st,vt,se='<h1 class="text-[28px] font-bold text-white">Recent Transactions</h1>',Jt,J=a[0]==="merchant"&&_e(),Ct=qt(a[1]),Q=[];for(let v=0;v<Ct.length;v+=1)Q[v]=me(ue(a,Ct,v));function ne(v,U){return v[3].length>0?Le:He}let Ht=ne(a),X=Ht(a);return{c(){t=o("div"),n=o("div"),l=o("table"),u=o("thead"),s=o("tr"),c=o("th"),c.textContent=f,x=_(),V=o("th"),V.textContent=D,b=_(),T=o("th"),T.textContent=H,M=_(),L=o("th"),L.textContent=j,Y=_(),I=o("th"),I.textContent=O,B=_(),w=o("th"),w.textContent=C,d=_(),J&&J.c(),h=_(),E=o("th"),y=_(),A=o("tbody");for(let v=0;v<Q.length;v+=1)Q[v].c();K=_(),F=o("div"),F.innerHTML=Z,ot=_(),nt=o("div"),z=o("div"),k=o("div"),$=o("div"),$.textContent=kt,pt=_(),tt=o("div"),bt=P("$"),it=P(at),Bt=_(),rt=o("div"),rt.textContent=Zt,Ft=_(),et=o("div"),ct=o("div"),ct.textContent=$t,Ot=_(),ft=o("div"),zt=P("$"),yt=P(xt),Ut=_(),dt=o("div"),dt.textContent=te,Yt=_(),lt=o("div"),ut=o("div"),ut.textContent=ee,Qt=_(),Tt=o("div"),It=P(a[6]),Gt=_(),ht=o("div"),ht.textContent=le,Vt=_(),st=o("div"),vt=o("div"),vt.innerHTML=se,Jt=_(),X.c(),this.h()},l(v){t=i(v,"DIV",{class:!0});var U=p(t);n=i(U,"DIV",{class:!0});var q=p(n);l=i(q,"TABLE",{class:!0});var _t=p(l);u=i(_t,"THEAD",{});var ae=p(u);s=i(ae,"TR",{});var G=p(s);c=i(G,"TH",{"data-svelte-h":!0}),S(c)!=="svelte-qggnut"&&(c.textContent=f),x=m(G),V=i(G,"TH",{"data-svelte-h":!0}),S(V)!=="svelte-1tfe9gf"&&(V.textContent=D),b=m(G),T=i(G,"TH",{"data-svelte-h":!0}),S(T)!=="svelte-i34oge"&&(T.textContent=H),M=m(G),L=i(G,"TH",{"data-svelte-h":!0}),S(L)!=="svelte-9c57ka"&&(L.textContent=j),Y=m(G),I=i(G,"TH",{"data-svelte-h":!0}),S(I)!=="svelte-wafei9"&&(I.textContent=O),B=m(G),w=i(G,"TH",{"data-svelte-h":!0}),S(w)!=="svelte-13zf735"&&(w.textContent=C),d=m(G),J&&J.l(G),h=m(G),E=i(G,"TH",{}),p(E).forEach(r),G.forEach(r),ae.forEach(r),y=m(_t),A=i(_t,"TBODY",{});var oe=p(A);for(let Xt=0;Xt<Q.length;Xt+=1)Q[Xt].l(oe);oe.forEach(r),_t.forEach(r),q.forEach(r),U.forEach(r),K=m(v),F=i(v,"DIV",{class:!0,"data-svelte-h":!0}),S(F)!=="svelte-xwka3e"&&(F.innerHTML=Z),ot=m(v),nt=i(v,"DIV",{class:!0});var ie=p(nt);z=i(ie,"DIV",{class:!0});var Dt=p(z);k=i(Dt,"DIV",{class:!0});var gt=p(k);$=i(gt,"DIV",{class:!0,"data-svelte-h":!0}),S($)!=="svelte-1ul1asq"&&($.textContent=kt),pt=m(gt),tt=i(gt,"DIV",{class:!0});var Kt=p(tt);bt=R(Kt,"$"),it=R(Kt,at),Kt.forEach(r),Bt=m(gt),rt=i(gt,"DIV",{class:!0,"data-svelte-h":!0}),S(rt)!=="svelte-lcwqtc"&&(rt.textContent=Zt),gt.forEach(r),Ft=m(Dt),et=i(Dt,"DIV",{class:!0});var wt=p(et);ct=i(wt,"DIV",{class:!0,"data-svelte-h":!0}),S(ct)!=="svelte-1lkd4am"&&(ct.textContent=$t),Ot=m(wt),ft=i(wt,"DIV",{class:!0});var Wt=p(ft);zt=R(Wt,"$"),yt=R(Wt,xt),Wt.forEach(r),Ut=m(wt),dt=i(wt,"DIV",{class:!0,"data-svelte-h":!0}),S(dt)!=="svelte-1hrzwj5"&&(dt.textContent=te),wt.forEach(r),Yt=m(Dt),lt=i(Dt,"DIV",{class:!0});var Et=p(lt);ut=i(Et,"DIV",{class:!0,"data-svelte-h":!0}),S(ut)!=="svelte-1vu18uz"&&(ut.textContent=ee),Qt=m(Et),Tt=i(Et,"DIV",{class:!0});var re=p(Tt);It=R(re,a[6]),re.forEach(r),Gt=m(Et),ht=i(Et,"DIV",{class:!0,"data-svelte-h":!0}),S(ht)!=="svelte-hha9xb"&&(ht.textContent=le),Et.forEach(r),Dt.forEach(r),ie.forEach(r),Vt=m(v),st=i(v,"DIV",{class:!0});var Lt=p(st);vt=i(Lt,"DIV",{class:!0,"data-svelte-h":!0}),S(vt)!=="svelte-1ilcbc9"&&(vt.innerHTML=se),Jt=m(Lt),X.l(Lt),Lt.forEach(r),this.h()},h(){g(l,"class","table text-white table-layout: auto;"),g(n,"class","overflow-x-auto"),g(t,"class","w-full p-4"),g(F,"class","w-full flex justify-between p-4"),g($,"class","stat-title"),g(tt,"class","stat-value"),g(rt,"class","stat-desc"),g(k,"class","stat"),g(ct,"class","stat-title"),g(ft,"class","stat-value"),g(dt,"class","stat-desc"),g(et,"class","stat"),g(ut,"class","stat-title"),g(Tt,"class","stat-value"),g(ht,"class","stat-desc"),g(lt,"class","stat"),g(z,"class","stats stats-vertical md:stats-horizontal shadow w-full"),g(nt,"class","flex justify-center my-3"),g(vt,"class","w-full flex justify-between p-4"),g(st,"class","overflow-x-auto justify-center shadow-md orange")},m(v,U){N(v,t,U),e(t,n),e(n,l),e(l,u),e(u,s),e(s,c),e(s,x),e(s,V),e(s,b),e(s,T),e(s,M),e(s,L),e(s,Y),e(s,I),e(s,B),e(s,w),e(s,d),J&&J.m(s,null),e(s,h),e(s,E),e(l,y),e(l,A);for(let q=0;q<Q.length;q+=1)Q[q]&&Q[q].m(A,null);N(v,K,U),N(v,F,U),N(v,ot,U),N(v,nt,U),e(nt,z),e(z,k),e(k,$),e(k,pt),e(k,tt),e(tt,bt),e(tt,it),e(k,Bt),e(k,rt),e(z,Ft),e(z,et),e(et,ct),e(et,Ot),e(et,ft),e(ft,zt),e(ft,yt),e(et,Ut),e(et,dt),e(z,Yt),e(z,lt),e(lt,ut),e(lt,Qt),e(lt,Tt),e(Tt,It),e(lt,Gt),e(lt,ht),N(v,Vt,U),N(v,st,U),e(st,vt),e(st,Jt),X.m(st,null)},p(v,U){if(v[0]==="merchant"?J||(J=_e(),J.c(),J.m(s,h)):J&&(J.d(1),J=null),U&2050){Ct=qt(v[1]);let q;for(q=0;q<Ct.length;q+=1){const _t=ue(v,Ct,q);Q[q]?Q[q].p(_t,U):(Q[q]=me(_t),Q[q].c(),Q[q].m(A,null))}for(;q<Q.length;q+=1)Q[q].d(1);Q.length=Ct.length}U&32&&at!==(at=v[5].toFixed(2)+"")&&W(it,at),U&16&&xt!==(xt=v[4].toFixed(2)+"")&&W(yt,xt),U&64&&W(It,v[6]),Ht===(Ht=ne(v))&&X?X.p(v,U):(X.d(1),X=Ht(v),X&&(X.c(),X.m(st,null)))},d(v){v&&(r(t),r(K),r(F),r(ot),r(nt),r(Vt),r(st)),J&&J.d(),be(Q,v),X.d()}}}function ve(a){let t,n="<p>Get in contact with a merchant for a partnership!</p>";return{c(){t=o("div"),t.innerHTML=n,this.h()},l(l){t=i(l,"DIV",{class:!0,"data-svelte-h":!0}),S(t)!=="svelte-11dkodd"&&(t.innerHTML=n),this.h()},h(){g(t,"class","w-full flex justify-between p-4")},m(l,u){N(l,t,u)},d(l){l&&r(t)}}}function _e(a){let t;return{c(){t=o("th")},l(n){t=i(n,"TH",{}),p(t).forEach(r)},m(n,l){N(n,t,l)},d(n){n&&r(t)}}}function me(a){let t,n,l=a[20]+1+"",u,s,c,f=a[21].ref.id+"",x,V,D,b=a[21].promotionStartDate+"",T,H,M,L=a[21].promotionDuration+"",j,Y,I,O=a[21].influencer.id+"",B,w,C,d=a[21].usageCount+"",h,E,y,A,K="View Code",F,Z,ot;function nt(){return a[14](a[21])}return{c(){t=o("tr"),n=o("th"),u=P(l),s=_(),c=o("td"),x=P(f),V=_(),D=o("td"),T=P(b),H=_(),M=o("td"),j=P(L),Y=_(),I=o("td"),B=P(O),w=_(),C=o("td"),h=P(d),E=_(),y=o("td"),A=o("a"),A.textContent=K,F=_(),this.h()},l(z){t=i(z,"TR",{});var k=p(t);n=i(k,"TH",{});var $=p(n);u=R($,l),$.forEach(r),s=m(k),c=i(k,"TD",{});var kt=p(c);x=R(kt,f),kt.forEach(r),V=m(k),D=i(k,"TD",{});var pt=p(D);T=R(pt,b),pt.forEach(r),H=m(k),M=i(k,"TD",{});var tt=p(M);j=R(tt,L),tt.forEach(r),Y=m(k),I=i(k,"TD",{});var bt=p(I);B=R(bt,O),bt.forEach(r),w=m(k),C=i(k,"TD",{});var at=p(C);h=R(at,d),at.forEach(r),E=m(k),y=i(k,"TD",{});var it=p(y);A=i(it,"A",{class:!0,href:!0,"data-svelte-h":!0}),S(A)!=="svelte-135qgqy"&&(A.textContent=K),it.forEach(r),F=m(k),k.forEach(r),this.h()},h(){g(A,"class","text-orange-400 hover:text-blue-700"),g(A,"href","javascript:void(0);")},m(z,k){N(z,t,k),e(t,n),e(n,u),e(t,s),e(t,c),e(c,x),e(t,V),e(t,D),e(D,T),e(t,H),e(t,M),e(M,j),e(t,Y),e(t,I),e(I,B),e(t,w),e(t,C),e(C,h),e(t,E),e(t,y),e(y,A),e(t,F),Z||(ot=Rt(A,"click",nt),Z=!0)},p(z,k){a=z,k&2&&f!==(f=a[21].ref.id+"")&&W(x,f),k&2&&b!==(b=a[21].promotionStartDate+"")&&W(T,b),k&2&&L!==(L=a[21].promotionDuration+"")&&W(j,L),k&2&&O!==(O=a[21].influencer.id+"")&&W(B,O),k&2&&d!==(d=a[21].usageCount+"")&&W(h,d)},d(z){z&&r(t),Z=!1,ot()}}}function He(a){let t,n="<p>No Transactions found</p>";return{c(){t=o("div"),t.innerHTML=n,this.h()},l(l){t=i(l,"DIV",{class:!0,"data-svelte-h":!0}),S(t)!=="svelte-1wsdbhs"&&(t.innerHTML=n),this.h()},h(){g(t,"class","w-full flex justify-between p-4")},m(l,u){N(l,t,u)},p:Nt,d(l){l&&r(t)}}}function Le(a){let t,n,l="<tr><th>Row #</th> <th>Employee Name</th> <th>Date</th> <th>Code ID</th> <th>Transaction Value</th></tr>",u,s,c,f,x,V,D,b,T,H,M,L,j,Y,I,O,B,w=qt(a[3]),C=[];for(let d=0;d<w.length;d+=1)C[d]=pe(de(a,w,d));return{c(){t=o("table"),n=o("thead"),n.innerHTML=l,u=_(),s=o("tbody");for(let d=0;d<C.length;d+=1)C[d].c();c=_(),f=o("div"),x=o("button"),V=P("«"),b=_(),T=o("button"),H=P("Page "),M=P(a[8]),L=_(),j=o("button"),Y=P("»"),this.h()},l(d){t=i(d,"TABLE",{class:!0});var h=p(t);n=i(h,"THEAD",{"data-svelte-h":!0}),S(n)!=="svelte-1rgjwe1"&&(n.innerHTML=l),u=m(h),s=i(h,"TBODY",{});var E=p(s);for(let Z=0;Z<C.length;Z+=1)C[Z].l(E);E.forEach(r),h.forEach(r),c=m(d),f=i(d,"DIV",{class:!0});var y=p(f);x=i(y,"BUTTON",{class:!0});var A=p(x);V=R(A,"«"),A.forEach(r),b=m(y),T=i(y,"BUTTON",{class:!0});var K=p(T);H=R(K,"Page "),M=R(K,a[8]),K.forEach(r),L=m(y),j=i(y,"BUTTON",{class:!0});var F=p(j);Y=R(F,"»"),F.forEach(r),y.forEach(r),this.h()},h(){g(t,"class","table text-white w-1/2"),g(x,"class","join-item btn"),x.disabled=D=a[8]===1,g(T,"class","join-item btn"),g(j,"class","join-item btn"),j.disabled=I=a[8]*mt>=a[2].length,g(f,"class","join flex justify-center mt-4")},m(d,h){N(d,t,h),e(t,n),e(t,u),e(t,s);for(let E=0;E<C.length;E+=1)C[E]&&C[E].m(s,null);N(d,c,h),N(d,f,h),e(f,x),e(x,V),e(f,b),e(f,T),e(T,H),e(T,M),e(f,L),e(f,j),e(j,Y),O||(B=[Rt(x,"click",a[10]),Rt(j,"click",a[9])],O=!0)},p(d,h){if(h&264){w=qt(d[3]);let E;for(E=0;E<w.length;E+=1){const y=de(d,w,E);C[E]?C[E].p(y,h):(C[E]=pe(y),C[E].c(),C[E].m(s,null))}for(;E<C.length;E+=1)C[E].d(1);C.length=w.length}h&256&&D!==(D=d[8]===1)&&(x.disabled=D),h&256&&W(M,d[8]),h&260&&I!==(I=d[8]*mt>=d[2].length)&&(j.disabled=I)},d(d){d&&(r(t),r(c),r(f)),be(C,d),O=!1,ge(B)}}}function pe(a){let t,n,l=(a[8]-1)*mt+a[20]+1+"",u,s,c,f=a[18].employeeName+"",x,V,D,b=new Date(a[18].timestamp.seconds*1e3).toLocaleString()+"",T,H,M,L=a[18].code.id+"",j,Y,I,O,B=a[18].transactionAmount.toFixed(2)+"",w,C;return{c(){t=o("tr"),n=o("td"),u=P(l),s=_(),c=o("td"),x=P(f),V=_(),D=o("td"),T=P(b),H=_(),M=o("td"),j=P(L),Y=_(),I=o("td"),O=P("$"),w=P(B),C=_()},l(d){t=i(d,"TR",{});var h=p(t);n=i(h,"TD",{});var E=p(n);u=R(E,l),E.forEach(r),s=m(h),c=i(h,"TD",{});var y=p(c);x=R(y,f),y.forEach(r),V=m(h),D=i(h,"TD",{});var A=p(D);T=R(A,b),A.forEach(r),H=m(h),M=i(h,"TD",{});var K=p(M);j=R(K,L),K.forEach(r),Y=m(h),I=i(h,"TD",{});var F=p(I);O=R(F,"$"),w=R(F,B),F.forEach(r),C=m(h),h.forEach(r)},m(d,h){N(d,t,h),e(t,n),e(n,u),e(t,s),e(t,c),e(c,x),e(t,V),e(t,D),e(D,T),e(t,H),e(t,M),e(M,j),e(t,Y),e(t,I),e(I,O),e(I,w),e(t,C)},p(d,h){h&256&&l!==(l=(d[8]-1)*mt+d[20]+1+"")&&W(u,l),h&8&&f!==(f=d[18].employeeName+"")&&W(x,f),h&8&&b!==(b=new Date(d[18].timestamp.seconds*1e3).toLocaleString()+"")&&W(T,b),h&8&&L!==(L=d[18].code.id+"")&&W(j,L),h&8&&B!==(B=d[18].transactionAmount.toFixed(2)+"")&&W(w,B)},d(d){d&&r(t)}}}function je(a){let t;function n(s,c){return s[7]?ye:xe}let l=n(a),u=l(a);return{c(){u.c(),t=Pt()},l(s){u.l(s),t=Pt()},m(s,c){u.m(s,c),N(s,t,c)},p(s,[c]){l===(l=n(s))&&u?u.p(s,c):(u.d(1),u=l(s),u&&(u.c(),u.m(t.parentNode,t)))},i:Nt,o:Nt,d(s){s&&r(t),u.d(s)}}}const mt=5;function Ae(a,t,n){let l;Ce(a,ke,w=>n(12,l=w));let u=[],s,c=[],f=[],x=[],V=0,D=0,b=0,T=!0,H=1;De(async()=>{l.userType&&(console.log(l.userType),await M(l.userType),n(7,T=!1))});async function M(w){let C,d;if(w==="merchant")C=jt(Mt(St,"codes"),At("merchant","==",l.userRef)),d=jt(Mt(St,"transactions"),At("merchant","==",l.userRef));else if(w==="influencer")C=jt(Mt(St,"codes"),At("influencer","==",l.userRef)),d=jt(Mt(St,"transactions"),At("influencer","==",l.userRef));else{console.error("Invalid user type.");return}try{const[h,E]=await Promise.all([ce(C),ce(d)]);n(1,u=h.docs.map(y=>({...y.data(),ref:y.ref}))),c=E.docs.map(y=>y.data()),n(2,f=c),L(),n(6,b=c.length),n(5,D=c.reduce((y,A)=>y+A.transactionAmount,0)),n(4,V=b?D/b:0)}catch(h){console.error("Error fetching data:",h)}finally{n(7,T=!1)}}function L(){const w=(H-1)*mt,C=w+mt;n(3,x=f.slice(w,C))}function j(){H*mt<f.length&&(n(8,H+=1),L())}function Y(){H>1&&(n(8,H-=1),L())}function I(w){fe(`/app/campaigns/${w}`)}const O=async()=>{await fe("/app/campaigns/new")},B=w=>I(w.ref.id);return a.$$.update=()=>{a.$$.dirty&4097&&l.userRef&&(n(0,s=l.userType),M(s))},[s,u,f,x,V,D,b,T,H,j,Y,I,l,O,B]}class Be extends we{constructor(t){super(),Ee(this,t,Ae,je,Te,{})}}export{Be as component};
